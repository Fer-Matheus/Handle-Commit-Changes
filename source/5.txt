: "diff --git a/OsmAnd/src/net/osmand/plus/dashboard/DashboardOnMap.java b/OsmAnd/src/net/osmand/plus/dashboard/DashboardOnMap.java\nindex d9f5d03b66..72bb2f61f9 100644\n--- a/OsmAnd/src/net/osmand/plus/dashboard/DashboardOnMap.java\n+++ b/OsmAnd/src/net/osmand/plus/dashboard/DashboardOnMap.java\n@@ -1,6 +1,7 @@\n package net.osmand.plus.dashboard;\n \n import android.annotation.SuppressLint;\n+import android.content.Context;\n import android.content.Intent;\n import android.content.res.Resources;\n import android.graphics.drawable.ColorDrawable;\n@@ -20,6 +21,7 @@ import android.view.ViewTreeObserver;\n import android.view.animation.Animation;\n import android.view.animation.Animation.AnimationListener;\n import android.view.animation.TranslateAnimation;\n+import android.view.inputmethod.InputMethodManager;\n import android.widget.AbsListView;\n import android.widget.AdapterView;\n import android.widget.AdapterView.OnItemClickListener;\n@@ -1337,6 +1339,9 @@ public class DashboardOnMap implements ObservableScrollViewCallbacks, DynamicLis\n \n \tprivate void backPressed() {\n \t\tif (previousVisibleType != visibleType && previousVisibleType != null) {\n+\t\t\tif (visibleType == DashboardType.MAPILLARY) {\n+\t\t\t\thideKeyboard();\n+\t\t\t}\n \t\t\tvisibleType = null;\n \t\t\tsetDashboardVisibility(true, previousVisibleType);\n \t\t} else {\n@@ -1344,6 +1349,14 @@ public class DashboardOnMap implements ObservableScrollViewCallbacks, DynamicLis\n \t\t}\n \t}\n \n+\tprivate void hideKeyboard() {\n+\t\tView currentFocus = mapActivity.getCurrentFocus();\n+\t\tif (currentFocus != null) {\n+\t\t\tInputMethodManager imm = (InputMethodManager) mapActivity.getSystemService(Context.INPUT_METHOD_SERVICE);\n+\t\t\timm.hideSoftInputFromWindow(currentFocus.getWindowToken(), 0);\n+\t\t}\n+\t}\n+\n \n \t@Override\n \tpublic void onScrollChanged(int scrollY, boolean firstScroll, boolean dragging) {\ndiff --git a/OsmAnd/src/net/osmand/plus/mapillary/MapillaryFiltersFragment.java b/OsmAnd/src/net/osmand/plus/mapillary/MapillaryFiltersFragment.java\nindex e81d7c881c..f6977bbe1b 100644\n--- a/OsmAnd/src/net/osmand/plus/mapillary/MapillaryFiltersFragment.java\n+++ b/OsmAnd/src/net/osmand/plus/mapillary/MapillaryFiltersFragment.java\n@@ -17,6 +17,7 @@ import android.view.View;\n import android.view.ViewGroup;\n import android.view.inputmethod.EditorInfo;\n import android.view.inputmethod.InputMethodManager;\n+import android.widget.AdapterView;\n import android.widget.Button;\n import android.widget.CompoundButton;\n import android.widget.DatePicker;\n@@ -102,7 +103,7 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n                 ResourceManager manager = getMyApplication().getResourceManager();\n                 manager.clearCacheAndTiles(TileSourceManager.getMapillaryVectorSource());\n                 manager.clearCacheAndTiles(TileSourceManager.getMapillaryRasterSource());\n-                plugin.updateLayers(mapActivity.getMapView(), mapActivity);\n+                mapActivity.refreshMap();\n             }\n         });\n \n@@ -120,12 +121,19 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n             textView.setText(selectedUsername);\n             textView.setSelection(selectedUsername.length());\n         }\n+        textView.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n+            @Override\n+            public void onItemClick(AdapterView<?> adapterView, View view, int i, long l) {\n+                hideKeyboard();\n+                mapActivity.getDashboard().refreshContent(true);\n+            }\n+        });\n         textView.setOnEditorActionListener(new TextView.OnEditorActionListener() {\n             @Override\n             public boolean onEditorAction(TextView textView, int id, KeyEvent keyEvent) {\n                 if (id == EditorInfo.IME_ACTION_DONE) {\n-                    InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);\n-                    imm.hideSoftInputFromWindow(textView.getWindowToken(), 0);\n+                    hideKeyboard();\n+                    mapActivity.getDashboard().refreshContent(true);\n                     return true;\n                 }\n                 return false;\n@@ -140,7 +148,7 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n             @Override\n             public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {\n                 view.findViewById(R.id.warning_linear_layout).setVisibility(View.GONE);\n-                if (charSequence.length() > 0 ||\n+                if (!settings.MAPILLARY_FILTER_USERNAME.get().equals(\"\") ||\n                         settings.MAPILLARY_FILTER_TO_DATE.get() != 0 ||\n                         settings.MAPILLARY_FILTER_FROM_DATE.get() != 0) {\n                     changeButtonState((Button) view.findViewById(R.id.button_apply), 1, true);\n@@ -170,6 +178,7 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n                 dateFromEt.setText(dateFormat.format(from.getTime()));\n                 settings.MAPILLARY_FILTER_FROM_DATE.set(from.getTimeInMillis());\n                 changeButtonState((Button) view.findViewById(R.id.button_apply), 1, true);\n+                mapActivity.getDashboard().refreshContent(true);\n             }\n         };\n         dateFromEt.setOnClickListener(new View.OnClickListener() {\n@@ -196,6 +205,7 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n                 dateToEt.setText(dateFormat.format(to.getTime()));\n                 settings.MAPILLARY_FILTER_TO_DATE.set(to.getTimeInMillis());\n                 changeButtonState((Button) view.findViewById(R.id.button_apply), 1, true);\n+                mapActivity.getDashboard().refreshContent(true);\n             }\n         };\n         dateToEt.setOnClickListener(new View.OnClickListener() {\n@@ -234,19 +244,20 @@ public class MapillaryFiltersFragment extends BaseOsmAndFragment {\n                 if (!settings.MAPILLARY_FILTER_USERNAME.get().equals(\"\") || !dateFrom.equals(\"\") || !dateTo.equals(\"\")) {\n                     settings.USE_MAPILLARY_FILTER.set(true);\n                 }\n-                if (!username.equals(\"\") && settings.MAPILLARY_FILTER_USERNAME.get().equals(\"\")) {\n-                    view.findViewById(R.id.warning_linear_layout).setVisibility(View.VISIBLE);\n-                }\n                 if (dateFrom.equals(\"\")) {\n                     settings.MAPILLARY_FILTER_FROM_DATE.set(0L);\n                 }\n                 if (dateTo.equals(\"\")) {\n                     settings.MAPILLARY_FILTER_TO_DATE.set(0L);\n                 }\n+                if (!username.equals(\"\") && settings.MAPILLARY_FILTER_USERNAME.get().equals(\"\")) {\n+                    view.findViewById(R.id.warning_linear_layout).setVisibility(View.VISIBLE);\n+                } else {\n+                    mapActivity.getDashboard().hideDashboard();\n+                }\n \n                 changeButtonState(apply, .5f, false);\n                 plugin.updateLayers(mapActivity.getMapView(), mapActivity);\n-                mapActivity.getDashboard().hideDashboard();\n             }\n       ",